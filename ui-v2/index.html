<!DOCTYPE html>
<html lang="nl" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="common.app_title">AgentOS VideoProcessor - Intelligente Video Bewerking</title>
  <meta name="description" data-i18n="common.app_description" content="Maak professionele video clips, hoogtepunten en samenvattingen met AI-technologie">
  
  <!-- Preload CSS -->
  <link rel="preload" href="./public/css/main.css?v=2" as="style">
  
  <!-- Critical CSS inline for fastest render -->
  <style>
    /* Critical above-the-fold styles */
    :root {
      /* Design System Variables */
      --primary-500: #4C6EF5;
      --primary-400: #748FFC;
      --primary-600: #3B5BDB;
      --success-500: #51CF66;
      --warning-500: #FFD43B;
      --danger-500: #FF6B6B;
      --gray-900: #212529;
      --gray-700: #495057;
      --gray-500: #868E96;
      --gray-300: #DEE2E6;
      --gray-100: #F8F9FA;
      --gray-50: #FFFFFF;
      
      /* Typography */
      --font-family-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      --text-xs: 0.75rem;
      --text-sm: 0.875rem;
      --text-base: 1rem;
      --text-lg: 1.125rem;
      --text-xl: 1.25rem;
      --text-2xl: 1.5rem;
      --text-3xl: 1.875rem;
      --text-4xl: 2.25rem;
      
      /* Spacing */
      --space-1: 0.25rem;
      --space-2: 0.5rem;
      --space-3: 0.75rem;
      --space-4: 1rem;
      --space-6: 1.5rem;
      --space-8: 2rem;
      --space-12: 3rem;
      --space-16: 4rem;
      --space-20: 5rem;
      
      /* Animations */
      --transition-fast: 0.15s ease;
      --transition-base: 0.2s ease;
      --transition-slow: 0.3s ease;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: var(--font-family-primary);
      font-size: var(--text-base);
      line-height: 1.6;
      color: var(--gray-900);
      background-color: var(--gray-50);
      overflow-x: hidden;
    }
    
    /* Loading state */
    .app-loading {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--gray-50);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid var(--gray-300);
      border-top: 3px solid var(--primary-500);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Hide content until loaded */
    .app-content {
      opacity: 0;
      transition: opacity var(--transition-slow);
    }
    
    .app-content.loaded {
      opacity: 1;
    }
    
    /* Progressive Enhancement base styles */
    .hidden { display: none !important; }
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
  </style>
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="./public/css/main.css?v=2">
  <link rel="stylesheet" href="./public/css/visual-rich.css?v=2">
  <link rel="stylesheet" href="./public/css/results-grid.css?v=2">
  <link rel="stylesheet" href="./public/css/analytics.css?v=2">
  
  <!-- Preconnect to external domains -->
  <link rel="preconnect" href="http://localhost:8001" crossorigin>
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="./public/assets/favicon.svg">
  <link rel="icon" type="image/png" href="./public/assets/favicon.png">
  
  <!-- PWA manifest -->
  <link rel="manifest" href="./public/manifest.json">
  <meta name="theme-color" content="#4C6EF5">
  
  <!-- Social media meta tags -->
  <meta property="og:title" data-i18n="common.app_title" content="Video Clipper - AI Video Processing">
  <meta property="og:description" data-i18n="common.app_description" content="Create viral clips, highlights and summaries from your videos using AI">
  <meta property="og:type" content="website">
  <meta property="og:image" content="./public/assets/og-image.jpg">
  <meta name="twitter:card" content="summary_large_image">
</head>

<body>
  <!-- Loading Screen -->
  <div class="app-loading" id="loadingScreen">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <p data-i18n="common.loading" style="margin-top: var(--space-4); color: var(--gray-700);">
        Laden...
      </p>
    </div>
  </div>

  <!-- Main Application -->
  <div class="app-content" id="appContent">
    <!-- Header with Language Switcher -->
    <header class="app-header">
      <div class="header-container">
        <div class="header-left">
          <div class="logo">
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
              <defs>
                <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                </linearGradient>
              </defs>
              <rect width="40" height="40" rx="12" fill="url(#logoGradient)"/>
              <path d="M15 12L27 20L15 28V12Z" fill="white"/>
              <circle cx="30" cy="10" r="4" fill="#10b981" opacity="0.8"/>
            </svg>
            <span class="logo-text" data-i18n="common.app_name">AgentOS VideoProcessor</span>
          </div>
          
          <!-- Clean Header - No Duplicate Text -->
          <nav class="main-nav">
            <!-- Navigation simplified to avoid duplication with logo -->
          </nav>
        </div>
        
        <div class="header-right">
          <!-- Language Switcher -->
          <div class="language-switcher">
            <select id="languageSelect" 
                    class="language-select"
                    aria-label="Select language">
              <option value="nl">üá≥üá± Nederlands</option>
              <option value="en">üá¨üáß English</option>
              <option value="de">üá©üá™ Deutsch</option>
              <option value="fr">üá´üá∑ Fran√ßais</option>
            </select>
          </div>
          
          <!-- Admin Dashboard Link -->
          <a href="http://localhost:8003/" class="admin-link" title="Admin Dashboard" target="_blank">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
            </svg>
          </a>
          
          <!-- Help Button -->
          <button class="help-button" 
                  id="helpButton"
                  data-i18n-title="common.help">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.94 6.94a.75.75 0 11-1.061-1.061C8.735 4.017 9.61 3.75 10.25 3.75s1.515.267 2.371 1.129c.87.876 1.129 1.996 1.129 2.621 0 .76-.316 1.569-1.128 2.628l-.372.486c-.17.22-.299.457-.299.696v.142a.75.75 0 01-1.5 0v-.142c0-.81.414-1.514.832-2.069l.348-.454c.477-.625.668-1.036.668-1.287 0-.296-.113-.66-.398-.944a.653.653 0 00-.478-.199c-.266 0-.398.126-.478.199-.085.078-.172.15-.248.298a.75.75 0 11-1.28-.781c.093-.146.230-.296.398-.476zM10 15a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
            </svg>
          </button>
        </div>
      </div>
    </header>

    <!-- Main Content Area -->
    <main class="app-main" id="appMain">
      
      <!-- Content Views -->
      <div class="content-view active" id="processorView">
      
      <!-- Step 1: Intent Selection (Initial View) -->
      <section class="step step-intent active" id="stepIntent">
        <div class="step-container">
          <div class="step-header">
            <h1 class="step-title" data-i18n="intent.title">
              Wat wil je met je video doen?
            </h1>
            <p class="step-subtitle" data-i18n="intent.subtitle">
              Kies wat je wilt maken van je video
            </p>
          </div>
          
          <div class="intent-grid" id="intentGrid">
            <!-- Visual Clips - Smart social media clips -->
            <div class="intent-card" data-intent="visual_clips" tabindex="0" role="button">
              <div class="intent-icon">
                <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                  <defs>
                    <linearGradient id="shortGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                      <stop offset="100%" style="stop-color:#1d4ed8;stop-opacity:1" />
                    </linearGradient>
                  </defs>
                  <circle cx="32" cy="32" r="30" fill="url(#shortGradient)" opacity="0.1"/>
                  <rect x="12" y="12" width="40" height="40" rx="8" fill="url(#shortGradient)"/>
                  <path d="M24 20L40 32L24 44V20Z" fill="white"/>
                  <circle cx="50" cy="14" r="6" fill="#10b981"/>
                  <path d="M47 11L53 14L47 17V11Z" fill="white"/>
                </svg>
              </div>
              <div class="intent-content">
                <h3 class="intent-title" data-i18n="intent.visual_clips.title">
                  Visuele Clips üìπ
                </h3>
                <p class="intent-description" data-i18n="intent.visual_clips.description">
                  Slimme clips met gezichtsherkenning & 9:16 cropping
                </p>
                <div class="intent-features">
                  <span class="feature-tag">AI Gezichtsdetectie</span>
                  <span class="feature-tag">Smart Cropping</span>
                  <span class="feature-tag">TikTok/Reels Ready</span>
                </div>
              </div>
              <div class="intent-arrow">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                </svg>
              </div>
            </div>
            
            <!-- Key Moments Mode -->
            <div class="intent-card" data-intent="key_moments" tabindex="0" role="button">
              <div class="intent-icon">
                <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                  <defs>
                    <linearGradient id="keyGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
                      <stop offset="100%" style="stop-color:#d97706;stop-opacity:1" />
                    </linearGradient>
                  </defs>
                  <circle cx="32" cy="32" r="30" fill="url(#keyGradient)" opacity="0.1"/>
                  <path d="M32 16L37.09 26.26L48 27.27L40 35.54L42.18 46.41L32 41.1L21.82 46.41L24 35.54L16 27.27L26.91 26.26L32 16Z" fill="url(#keyGradient)"/>
                  <circle cx="50" cy="14" r="6" fill="#ef4444"/>
                  <path d="M47 11L50 14L53 11L50 17Z" fill="white"/>
                </svg>
              </div>
              <div class="intent-content">
                <h3 class="intent-title" data-i18n="intent.key_moments.title">
                  Hoogtepunten ‚≠ê
                </h3>
                <p class="intent-description" data-i18n="intent.key_moments.description">
                  Snelle extractie van beste momenten zonder bewerking
                </p>
                <div class="intent-features">
                  <span class="feature-tag">Minimale Processing</span>
                  <span class="feature-tag">Origineel Formaat</span>
                  <span class="feature-tag">Snel Resultaat</span>
                </div>
              </div>
              <div class="intent-arrow">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                </svg>
              </div>
            </div>
            
            <!-- Smart Content - AI-generated scripts -->
            <div class="intent-card" data-intent="smart_content" tabindex="0" role="button">
              <div class="intent-icon">
                <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                  <defs>
                    <linearGradient id="summaryGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                      <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
                      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
                    </linearGradient>
                  </defs>
                  <circle cx="32" cy="32" r="30" fill="url(#summaryGradient)" opacity="0.1"/>
                  <rect x="12" y="12" width="40" height="40" rx="8" fill="url(#summaryGradient)"/>
                  <path d="M20 22H44M20 28H44M20 34H36" stroke="white" stroke-width="2" stroke-linecap="round"/>
                  <circle cx="50" cy="14" r="6" fill="#3b82f6"/>
                  <path d="M47 11L50 14L53 11" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div class="intent-content">
                <h3 class="intent-title" data-i18n="intent.smart_content.title">
                  Slimme Content ü§ñ
                </h3>
                <p class="intent-description" data-i18n="intent.smart_content.description">
                  AI-gegenereerde scripts, captions & social posts
                </p>
                <div class="intent-features">
                  <span class="feature-tag">AI Scripts</span>
                  <span class="feature-tag">Auto Captions</span>
                  <span class="feature-tag">Social Posts</span>
                </div>
              </div>
              <div class="intent-arrow">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                </svg>
              </div>
            </div>
            
          </div>
        </div>
      </section>

      <!-- Step 2: Smart Upload (Hidden initially) -->
      <section class="step step-upload hidden" id="stepUpload">
        <div class="step-container">
          <div class="step-header">
            <button class="back-button" id="backToIntent">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
              <span data-i18n="common.back">Terug</span>
            </button>
            
            <h2 class="step-title">
              <span data-i18n="upload.title_prefix">Upload je video</span>
              <span class="intent-highlight" id="selectedIntentTitle"></span>
            </h2>
            <p class="step-subtitle" id="uploadTip">
              üí° Tip: Langere video's werken beter
            </p>
          </div>
          
          <div class="upload-experience">
            <!-- File Upload Zone -->
            <div class="upload-zone" id="uploadZone">
              <div class="upload-content">
                <div class="upload-icon">
                  <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                    <path d="M32 8V40M32 8L24 16M32 8L40 16" stroke="var(--gray-400)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M8 48V52C8 54.2091 9.79086 56 12 56H52C54.2091 56 56 54.2091 56 52V48" stroke="var(--gray-400)" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </div>
                <h3 class="upload-title" data-i18n="upload.drop_zone">
                  Sleep je video hierheen
                </h3>
                <p class="upload-subtitle" data-i18n="upload.click_to_select">
                  Of klik om een bestand te kiezen
                </p>
                <div class="supported-formats">
                  <span class="format-tag">MP4</span>
                  <span class="format-tag">MOV</span>
                  <span class="format-tag">AVI</span>
                  <span class="format-tag">WebM</span>
                </div>
              </div>
              <input type="file" 
                     id="fileInput" 
                     accept="video/*"
                     multiple="false"
                     class="upload-input"
                     hidden>
            </div>
            
            <!-- URL Input Alternative -->
            <div class="upload-divider">
              <span class="divider-text" data-i18n="upload.or">of</span>
            </div>
            
            <div class="url-section">
              <div class="url-input-wrapper">
                <svg class="url-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd"/>
                </svg>
                <input type="url" 
                       id="urlInput"
                       class="url-input"
                       placeholder=""
                       data-i18n-placeholder="upload.url_placeholder">
                <button class="url-submit" id="urlSubmit" type="button">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                  </svg>
                </button>
              </div>
              <div class="url-suggestions">
                <span class="suggestion-tag">YouTube</span>
                <span class="suggestion-tag">Vimeo</span>
                <span class="suggestion-tag">Twitch</span>
                <span class="suggestion-tag">Direct link</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Step 3: Processing (Hidden initially) -->
      <section class="step step-processing hidden" id="stepProcessing">
        <div class="step-container">
          <div class="step-header">
            <h2 class="step-title">
              <span data-i18n="processing.title_prefix">AI-verwerking actief:</span>
              <span class="intent-highlight" id="processingIntentTitle">video analyse</span>
            </h2>
            <p class="step-subtitle" data-i18n="processing.subtitle">
              Intelligente content-analyse voor optimale resultaten
            </p>
          </div>
          
          <div class="processing-visual">
            <div class="video-preview">
              <img id="videoThumbnail" 
                   src="" 
                   alt="Video preview" 
                   class="thumbnail">
              <div class="processing-overlay">
                <div class="scanning-line"></div>
                <div class="analysis-points">
                  <div class="analysis-point point-1">
                    <div class="point-dot"></div>
                    <span class="point-label" data-i18n="processing.detecting_moment">
                      Engagement detectie
                    </span>
                  </div>
                  <div class="analysis-point point-2">
                    <div class="point-dot"></div>
                    <span class="point-label" data-i18n="processing.emotional_peak">
                      Audio analyse
                    </span>
                  </div>
                  <div class="analysis-point point-3">
                    <div class="point-dot"></div>
                    <span class="point-label" data-i18n="processing.action_moment">
                      Visuele focus
                    </span>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="processing-steps">
              <div class="processing-step active" id="stepAnalyzing">
                <div class="step-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5S21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12S9.24 7 12 7S17 9.24 17 12S14.76 17 12 17ZM12 9C10.34 9 9 10.34 9 12S10.34 15 12 15S15 13.66 15 12S13.66 9 12 9Z"/>
                  </svg>
                </div>
                <div class="step-content">
                  <h4 class="step-title" data-i18n="processing.steps.analyzing.title">
                    Multi-modale Analyse
                  </h4>
                  <p class="step-description" data-i18n="processing.steps.analyzing.description">
                    AI-gestuurde audio-, video- en tekstanalyse
                  </p>
                </div>
                <div class="step-progress">
                  <div class="progress-bar">
                    <div class="progress-fill" id="analyzingProgress"></div>
                  </div>
                </div>
              </div>
              
              <div class="processing-step" id="stepExtracting">
                <div class="step-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9.5 4C7.01 4 5 6.01 5 8.5C5 9.32 5.25 10.08 5.68 10.71L4.93 11.46C4.54 11.85 4.54 12.48 4.93 12.87L11.13 19.07C11.52 19.46 12.15 19.46 12.54 19.07L19.07 12.54C19.46 12.15 19.46 11.52 19.07 11.13L12.87 4.93C12.48 4.54 11.85 4.54 11.46 4.93L10.71 5.68C10.08 5.25 9.32 5 8.5 5C6.01 5 4 7.01 4 9.5S6.01 14 8.5 14C9.32 14 10.08 13.75 10.71 13.32L11.46 14.07L12.87 12.66L12.12 11.91C12.55 11.28 12.8 10.52 12.8 9.7C12.8 7.21 10.79 5.2 8.3 5.2C7.48 5.2 6.72 5.45 6.09 5.88L5.34 5.13L4.93 5.54L5.68 6.29C5.25 6.92 5 7.68 5 8.5Z"/>
                  </svg>
                </div>
                <div class="step-content">
                  <h4 class="step-title" data-i18n="processing.steps.extracting.title">
                    Segment Extractie
                  </h4>
                  <p class="step-description" data-i18n="processing.steps.extracting.description">
                    Optimale tijdspannen bepalen en markeren
                  </p>
                </div>
              </div>
              
              <div class="processing-step" id="stepCreating">
                <div class="step-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9.96 11.42C10.07 12.14 10.06 12.87 9.92 13.58L8.63 13.93C8.19 12.91 8.17 11.78 8.59 10.75L9.96 11.42ZM14.5 12.75C14.22 13.54 13.78 14.26 13.2 14.86L12.29 13.95C12.9 13.34 13.34 12.57 13.58 11.72L14.5 12.75ZM16 6L18.5 9L16 12H13L11 14L9 12L11 10H14L16 6Z"/>
                  </svg>
                </div>
                <div class="step-content">
                  <h4 class="step-title" data-i18n="processing.steps.creating.title">
                    Output Generatie
                  </h4>
                  <p class="step-description" data-i18n="processing.steps.creating.description">
                    Finale video segmenten renderen en optimaliseren
                  </p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Async Processing Status Panel -->
          <div class="async-processing-panel" id="asyncProcessingPanel">
            <div class="processing-status-header">
              <div class="status-indicator">
                <span id="processingStatus" class="processing-status status-queued">In Queue</span>
                <div id="queueStatus" class="queue-status">
                  <span class="status-indicator">üü¢</span>
                  <span>Queue System Online</span>
                </div>
              </div>
              <div class="processing-controls">
                <button id="cancelProcessing" class="btn btn-secondary">
                  üõë Cancel
                </button>
                <button id="retryProcessing" class="btn btn-primary" style="display: none;">
                  üîÑ Retry
                </button>
              </div>
            </div>
            
            <!-- Chique Processing Indicator -->
            <div class="chic-processor" id="chicProcessor">
              <div class="processing-orb"></div>
              <div class="trevor-message" id="trevorMessage">
                Even geduld, we doen de magie...
              </div>
              <div class="processing-subtitle" id="processingSubtitle">
                AI is bezig met de analyse
              </div>
              <div class="processing-dots">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
              </div>
            </div>
            
            <!-- Clips Results (shown when completed) -->
            <div id="processingClips" class="processing-clips" style="display: none;">
              <!-- Dynamic clips will be inserted here -->
            </div>
            
            <div class="download-controls" style="display: none;">
              <button id="downloadAllClipsProcessing" class="btn btn-primary">
                üì¶ Download All Clips
              </button>
            </div>
          </div>

          <!-- Process Log Viewer -->
          <div class="process-log-viewer" id="processLogViewer" style="display: none;">
            <div class="log-viewer-header">
              <h4>üîç Proces Activiteit</h4>
              <button class="btn-toggle-logs" id="toggleLogs">üîº</button>
            </div>
            <div class="log-viewer-content">
              <div class="log-carousel" id="logCarousel">
                <div class="log-entry active">
                  <span class="log-time">00:00</span>
                  <span class="log-message">Verwerkingsproces gestart...</span>
                </div>
              </div>
              <div class="log-navigation">
                <button class="btn-nav" id="prevLog">‚óÄ</button>
                <span class="log-counter" id="logCounter">1 van 1</span>
                <button class="btn-nav" id="nextLog">‚ñ∂</button>
              </div>
            </div>
          </div>

          <div class="processing-footer">
            <div class="time-estimate">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
              </svg>
              <span id="timeEstimate" data-i18n="processing.time_estimate">
                Verwachte verwerkingstijd: 2-4 minuten
              </span>
            </div>
            <div class="processing-actions">
              <!-- Cancel button moved to async panel -->
            </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Step 4: Results (Hidden initially) -->
      <section class="step step-results hidden" id="stepResults">
        <div class="step-container">
          <div class="step-header">
            <h2 id="verwerking-voltooid" class="step-title">
              <span data-i18n="results.title_prefix">Verwerking voltooid!</span>
              <span class="intent-highlight" id="resultsIntentTitle">Resultaten</span>
              <span data-i18n="results.title_suffix">beschikbaar üéØ</span>
            </h2>
            <p class="step-subtitle">
              <span data-i18n="results.subtitle_prefix">AI-analyse heeft</span>
              <span class="clip-count" id="clipCount">3</span>
              <span data-i18n="results.subtitle_suffix">optimale segmenten ge√Ødentificeerd</span>
            </p>
          </div>
          
          <div class="results-content" id="resultsContent">
            <!-- Results will be populated by JavaScript -->
          </div>
          
          <div class="results-actions">
            <button class="btn-primary-lg" id="downloadAllClips">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
              </svg>
              <span data-i18n="results.actions.download_all">Alle segmenten downloaden</span>
            </button>
            <button class="btn-secondary-lg" id="createNewClips">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/>
              </svg>
              <span data-i18n="results.actions.new_video">Nieuwe verwerking</span>
            </button>
          </div>
        </div>
      </section>

      </div>

    </main>

    <!-- Error Notification System -->
    <div class="notification-container" id="notificationContainer">
      <!-- Notifications will be inserted here -->
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay hidden" id="helpModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 data-i18n="common.help">Help</h3>
          <button class="modal-close" id="closeHelpModal">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
            </svg>
          </button>
        </div>
        <div class="modal-body" id="helpContent">
          <!-- Help content will be loaded here -->
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <!-- External dependencies -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  
  <!-- Load i18n first -->
  <script type="module" src="./src/i18n/utils/i18n.js"></script>
  
  <!-- Core application scripts -->
  <script type="module" src="./src/infrastructure/config/environment.js"></script>
  <script type="module" src="./src/infrastructure/state/app-store.js"></script>
  <script type="module" src="./src/adapters/api/api-client.js"></script>
  
  <!-- Main application entry point -->
  <script type="module" src="./src/main.js"></script>
  
  <!-- Progressive Enhancement -->
  <script>
    // Critical JavaScript for immediate interactivity
    document.addEventListener('DOMContentLoaded', function() {
      // Hide loading screen
      const loadingScreen = document.getElementById('loadingScreen');
      const appContent = document.getElementById('appContent');
      
      // Debug: log when DOM is ready
      console.log('üîç DOM Ready, waiting for i18n...');
      
      setTimeout(() => {
        loadingScreen.style.display = 'none';
        appContent.classList.add('loaded');
        
        // Debug: check i18n status after load
        setTimeout(() => {
          console.log('üîç After load check:', {
            i18nLoaded: window.i18n ? true : false,
            currentLocale: window.i18n ? window.i18n.currentLocale : 'not loaded',
            hasTranslations: window.i18n ? window.i18n.translations.size : 0,
            sampleText: document.querySelector('[data-i18n="intent.title"]')?.textContent
          });
        }, 1000);
      }, 500);
      
      // Basic keyboard navigation
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          // Close modals
          const modals = document.querySelectorAll('.modal-overlay:not(.hidden)');
          modals.forEach(modal => modal.classList.add('hidden'));
        }
      });
      
      // Basic accessibility enhancements
      const focusableElements = document.querySelectorAll('[tabindex="0"], button, input, select');
      focusableElements.forEach(element => {
        element.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' || e.key === ' ') {
            if (this.tagName !== 'INPUT' && this.tagName !== 'SELECT') {
              e.preventDefault();
              this.click();
            }
          }
        });
      });
      
      // Auto-scroll to results when they appear
      const observer = new MutationObserver(() => {
        const resultsStep = document.getElementById("stepResults");
        const resultsHeader = document.getElementById("verwerking-voltooid");
        
        if (resultsStep && resultsStep.classList.contains('active') && resultsHeader) {
          setTimeout(() => {
            // Calculate header height for offset
            const header = document.querySelector('.app-header');
            const headerHeight = header ? header.offsetHeight : 80;
            const elementPosition = resultsHeader.getBoundingClientRect().top + window.pageYOffset;
            const offsetPosition = elementPosition - headerHeight - 16; // 16px extra breathing room
            
            window.scrollTo({
              top: offsetPosition,
              behavior: "smooth"
            });
          }, 300); // Small delay to ensure step transition is complete
          observer.disconnect();
        }
      });
      
      observer.observe(document.body, { 
        childList: true, 
        subtree: true, 
        attributes: true, 
        attributeFilter: ['class'] 
      });
    });
  </script>
</body>
</html>